// NHS.UK Frontend
@import 'node_modules/nhsuk-frontend/packages/nhsuk';

// App specific styles
@import 'app/app';

// Design examples
@import 'design-example/design-example';

/////////////////
// CUSTOM STYLING
/////////////////

// Container
$service-manual-container-size: 1100px;

// Container
.nhsuk-width-container {
  max-width: $service-manual-container-size;

  @media (min-width: 767px) and (max-width: 1164px) {
    margin: 0 32px;
  }
}

.nhsuk-header__navigation {
  max-width: $service-manual-container-size + 64px;
}

// Image with border
.app-image--border {
  border: 1px solid $color_nhsuk-grey-3;
  width: 100%;
}

// Lede sub text
.nhsuk-lede-text + .app-lede-text--sub {
  margin-bottom: nhsuk-spacing(7);
  margin-top: - nhsuk-spacing(3);

  @include mq($until: tablet) {
    margin-bottom: nhsuk-spacing(5);
    margin-top: - nhsuk-spacing(3);
  }
}

.app-lede-text + h2,
.app-lede-text + .nhsuk-heading-l {
  padding-top: nhsuk-spacing(2);
}

.app-lede-text--sub + h2,
.app-lede-text--sub + .nhsuk-heading-l {
  padding-top: nhsuk-spacing(0);
}

.app-lede-text + .app-index-navigation {
  padding-top: 0;
}

// The 'What's new' box in the home page hero
.app-latest-update {
  padding-bottom: nhsuk-spacing(7);
  padding-top: nhsuk-spacing(7);

  @include mq($until: desktop) {
    padding-bottom: nhsuk-spacing(6);
    padding-top: 0;
  }
}

.app-panel--transparent {
  background: transparent;
  border: 2px solid $nhsuk-secondary-border-color;
  color: $color_nhsuk-white;

  a {
    color: $color_nhsuk-white;

    &:hover,
    &:visited {
      color: $color_nhsuk-grey-5;
    }

    &:focus {
      color: $nhsuk-focus-text-color;
    }

  }
}

// Utility class for hiding content on mobile
.app-hide-mobile {
  @include mq($until: desktop) {
    display: none;
  }
}

// Utility class for hiding content on desktop
.app-hide-desktop {
  @include mq($from: desktop) {
    display: none;
  }
}

// Custom style for review date
.app-review-date {
  @include nhsuk-responsive-margin(5, 'top');

  .app-review-date__text {
    margin-bottom: 0;
  }
}

// Custom spacing for page headings
@include mq($until: tablet) {
  .app-page-heading,
  .app-lede-text,
  .app-contents-list,
  .app-lede-text--sub {
    margin-bottom: nhsuk-spacing(5);
  }

  .app-contents-list .nhsuk-contents-list__list {
    margin-bottom: 0;
  }
}

.app-breadcrumb__back {
  display: block;
}

// Responsive tables
// This should be used until a suitable
// solution is added to NHS.UK frontend
@include mq($until: tablet) {
  .app-table-responsive--cookies {
    thead {
      border: 0;
      clip: rect(0 0 0 0);
      height: 1px;
      margin: -1px;
      overflow: hidden;
      padding: 0;
      position: absolute;
      width: 1px;
    }
    tr {
      border-bottom: solid 2px $color_nhsuk-grey-4;
      display: block;

      &:last-child {
        border-bottom: 0;
      }
    }
    td {
      border-bottom: 1px dotted $color_nhsuk-grey-4;
      display: block;
      text-align: left;

      &:last-child {
        border-bottom: 0;
      }

      &::before {
        content: attr(data-label);
        display: block;
        font-weight: bold;
        padding-right: 20px;
      }
    }
  }
}

// Added meta data for a promo (date)
.app-promo__meta {
  @include nhsuk-font($size: 16);

  color: $nhsuk-secondary-text-color;

  @include mq($from: tablet) {
    margin-bottom: nhsuk-spacing(3);
  }
}

// Main nav active state
.app-header__navigation-item__item--current {
  box-shadow: inset 0 -4px 0 $color_nhsuk-white;

  .nhsuk-header__navigation-link {
    font-weight: $nhsuk-font-bold;
  }
}

/////////////////
// FRONTEND FIXES
/////////////////

/**
 * Hotfix for an issue with nested list spacing in
 * the NHS.UK frontend library
 *
 * https://github.com/nhsuk/nhsuk-frontend/issues/430
 */

 .nhsuk-u-nested-list {
  margin-bottom: 0;
}

.nhsuk-u-nested-list > li {
  @include nhsuk-responsive-margin(2, 'top');
}

// Nowrap hotfix
.nhsuk-u-nowrap {
  white-space: nowrap;
}

// Frontend override
// Should be refactored into the frontend
// The font weight should be 400 by default
.nhsuk-body-m,
.nhsuk-body-s {
  font-weight: 400;
}

// Reduce promo bottom margin on mobile
.nhsuk-promo-group,
.nhsuk-promo-group__item {
  @include mq($until: desktop) {
    margin-bottom: nhsuk-spacing(3) + nhsuk-spacing(1);
  }
}

// Lede text + lede text
.nhsuk-lede-text + .nhsuk-lede-text {
  margin-top: - nhsuk-spacing(3);
}

h1 + .nhsuk-lede-text {
  margin-top: 0;
}

// Breadcrumb hotfix
// To not have a visited state for back link
.nhsuk-breadcrumb__backlink:visited {
  color: $nhsuk-link-color;
}

// Breadcrumb hotfix
// To not have a visited state for breadcrumb link
.nhsuk-breadcrumb__link:visited {
  color: $color_nhsuk-blue;
}

// Table bug hot fix
.nhsuk-table__cell.nhsuk-body-s {
  display: table-cell;
}

// Pagination hotfix for icon colour on focus & hover
.nhsuk-pagination__link:visited:focus .nhsuk-icon {
  fill: $nhsuk-focus-text-color;
}

// Remove main nav hover background colour on desktop
@include mq($from: large-desktop) {
  .nhsuk-header__navigation-link {
    &:hover {
      background-color: transparent;
    }
  }
}

// Hotfix menu item icon colour on hover/focus
.nhsuk-header__navigation-link:hover .nhsuk-icon__chevron-right {
  fill: $color_nhsuk-white;
}

.nhsuk-header__navigation-link:focus .nhsuk-icon__chevron-right {
  fill: $nhsuk-focus-text-color;
}

